<html>
	<head>
	<script  src="lib/wysiwyg.js"></script>
	<script  src="lib/wysiwyg-settings.js"></script>
	<script>
          
	jQuery(document).ready(function(){
			WYSIWYG.attach('emailMsg');
			});
          
          
 	</script>
	</head>
	<body>
         	


 			<h1>Ticket History</h1>
 	
			<table class="table table-condensed" id="tickethistory">
				      <thead>
				        <tr>
						  <th>TICKET NAME</th>
				          <th>TOTAL QUANTITY</th>
				          <th>TICKET PRICE</th>
				          <th>TOTAL TICKET PRICE</th>
				          <th>SOLD QUANTITY</th>
				          <th>SOLD TICKET PRICE</th>
				          <th>QUICK LINKS</th>
				        </tr>
				      </thead>
				      <tbody>
				        <tr ng-repeat="order in subOrdersList" >
				          <td>{{order.ticketName}}</td>
				          <td>{{order.maxQty}}</td>
				          <td>{{order.price}}</td>
				          <td>{{order.totalTicketsPrice}}</td>
				          <td>{{order.soldQty}}</td>
				          <td>{{order.totalTicketSoldPrice}}</td> <!-- ng-show="showAttendeDetails" -->
				           <td><a href="" ng-click="fetchAttendees(order.ticketId)" data-toggle="modal" data-target="#attendesModal" >View Attendees</a> | 
				           <a href="" ng-click="fetchBuyers(order.ticketId)" data-toggle="modal" data-target="#buyersModal">View Buyers</a> | 
				           <a href="" ng-click="storeTicketId(order.ticketId)" data-toggle="modal" data-target="#emailModal">Send Mail</a></td>
				        </tr>   
				      </tbody>
			</table>
			
			
	<div id="attendesModal" class="modal hide fade" role="dialog">
		<div class="modal-header">
			<h3>Attendees</h3>
		</div>
		<div class="modal-body">
			<table class="table table-condensed">
				      <thead>
				        <tr >
				        	<th ng-repeat="header in attendeesList.headers">{{header}}</th>
				        </tr>
				      </thead>
				      <tbody>
				        <tr ng-repeat="valuesList in attendeesList.valueList">
				          <td ng-repeat="value in valuesList">
				          	{{value}}
				          </td>
				       </tr>
				      </tbody>
			</table>
		</div>
		<div class="modal-footer">
			<button class="btn " data-dismiss="modal" aria-hidden="true">Close</button>
		</div>
	</div>	
	
	<div id="buyersModal" class="modal hide fade">
		<div class="modal-header">
			<h3>Buyers</h3>
		</div>
		<div class="modal-body">		
			<table class="table table-condensed">
				      <thead>
				        <tr>
						  <th>FIRST NAME</th>
				          <th>LAST NAME</th>
				          <th>EMAIL</th>
				        </tr>
				      </thead>
				      <tbody>
				        <tr ng-repeat="user in buyersList.userDTOs" >
				          <td>{{user.fname}}</td>
				          <td>{{user.lname}}</td>
				          <td>{{user.email}}</td>
				         </tr>   
				      </tbody>
			</table> 
		</div>
		<div class="modal-footer">
			<button class="btn " data-dismiss="modal" aria-hidden="true">Close</button>
		</div>
	</div>	 
	
	<div id="emailModal" class="modal hide fade">
		<div class="modal-header">
			<h3>Mail</h3>
		</div>
		<div class="modal-body">
		
	<div class="control-group">
	<label class="control-label" for="from">From :</label>
		<div class="controls">	
			<input type="text" name="input" ng-model="from" disabled="true"></input>
		</div>
	</div>
	<div class="control-group">
	<label class="control-label" for="to">To :</label>
		<div class="controls">	
			 <select ng-model="mail.toValue">
				<option value="all">All</option>
				<option value="buyers">To Buyers</option>
				<option value="attendees">To Attendees</option>
			</select>
		</div>
	</div>
	<div class="control-group">
	<label class="control-label" for="subject">Subject :</label>
		<div class="controls">	
			<input type="text" name="subject" ng-model="mail.subject"></input>
		</div>
	</div>
				
		    <div class="control-group">
				<label class="control-label" for="message">Message :</label>
				<div class="controls">
				<textarea id="emailMsg" name="message" ng-model="mail.message" rows="10" style="width:90%"></textarea>
				</div>
			</div>
		
		
		</div>
		<div class="modal-footer">
			<button class="btn " data-dismiss="modal" aria-hidden="true">Cancel</button>
			<button class="btn" data-dismiss="modal" aria-hidden="true" ng-click="sendMail(mail)">Send</button>
		</div>
	</div>	


</body>
</html>



       
